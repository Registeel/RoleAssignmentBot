const snekfetch = require("snekfetch")

module.exports.get = (endpoint, authorization, options) => {
	return new Promise((resolve, reject) => {
		const request = snekfetch.get(endpoint).set(options.authorization ? options.authorization : "Authorization", authorization)

		if (options) {
			if (options.data) request.send(options.data)
			if (options.query) request.query(options.query)
		}

		request.then((results) => {
			if (results.status !== 200) return reject(results);
			return resolve(results.body);
		}).catch((error) => console.log(error))
	})
}

module.exports.post = (endpoint, authorization, options) => {
	return new Promise((resolve, reject) => {
		const request = snekfetch.post(endpoint).set("Authorization", authorization)

		if (options) {
			if (options.data) request.send(options.data)
			if (options.query) request.query(options.query)
		}
	
		request.then((results) => {
			if (results.status !== 200) return reject(results);
			return resolve(results.body);
		}).catch((error) => console.log(error.request.res))
	})
}